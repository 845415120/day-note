
## 生命周期 - 概述

`目标任务:`  能够说出组件生命周期一共几个阶段

> 组件的生命周期是指组件从被创建到挂载到页面中运行起来，再到组件不用时卸载的过程，注意，只有类组件才有生命周期（类组件 实例化  函数组件 不需要实例化）

![](life.png)

<http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/>



## 生命周期 - 挂载阶段

`目标任务:`  能够说出在组件挂载阶段执行的钩子函数和执行时机

![](life1.png)

| 钩子 函数         | 触发时机                                            | 作用                                                         |
| ----------------- | --------------------------------------------------- | ------------------------------------------------------------ |
| constructor       | 创建组件时，最先执行，初始化的时候只执行一次        | 1. 初始化state  2. 创建 Ref 3. 使用 bind 解决 this 指向问题等 |
| render            | 每次组件渲染都会触发                                | 渲染UI（**注意： 不能在里面调用setState()** ）               |
| componentDidMount | 组件挂载（完成DOM渲染）后执行，初始化的时候执行一次 | 1. 发送网络请求   2.DOM操作                                  |

## 生命周期 - 更新阶段

`目标任务:`  能够说出组件的更新阶段的钩子函数以及执行时机

![](life2.png)

| 钩子函数           | 触发时机                  | 作用                                                         |
| ------------------ | ------------------------- | ------------------------------------------------------------ |
| render             | 每次组件渲染都会触发      | 渲染UI（与 挂载阶段 是同一个render）                         |
| componentDidUpdate | 组件更新后（DOM渲染完毕） | DOM操作，可以获取到更新后的DOM内容，**不要直接调用setState** |

## 生命周期 - 卸载阶段

`目标任务:`  能够说出组件的销毁阶段的钩子函数以及执行时机

| 钩子函数             | 触发时机                 | 作用                               |
| -------------------- | ------------------------ | ---------------------------------- |
| componentWillUnmount | 组件卸载（从页面中消失） | 执行清理工作（比如：清理定时器等） |

## 阶段小练习 - todoMVC

案例仓库地址：https://gitee.com/react-course-series/react-todo-mvc

**项目演示步骤：**

1. 克隆项目到本地

   ```bash
   git clone  https://gitee.com/react-course-series/react-todo-mvc.git
   ```

2. 安装必要依赖

   ```bash
   yarn
   ```

3. 开启mock接口服务，**保持窗口不关闭**  ！！！！！

   ```bash
   # 启动mock服务
   yarn mock-serve
   ```

4. **另起一个bash窗口**开启前端服务

   ```bash
   yarn start
   ```

5. 浏览器输入 localhost:3000演示效果

**项目开发步骤：**

1. 切换到todo-test分支

   ```bash
   git checkout todo-test
   ```

2. 打开 app.js

   已有基础样板代码，在这个基础上编写业务逻辑即可
   

接口文档

  |  接口作用 | 接口地址                              | 接口方法 | 接口参数               |
   | -------- | ------------------------------------- | -------- | ---------------------- |
   | 获取列表 | http://localhost:3001/data            | GET      | 无                     |
   | 删除     | http://localhost:3001/data/:id        | DELETE   | id                     |
   | 搜索     | http://localhost:3001/data/?q=keyword | GET      | name（以name字段搜索） |
**实现功能**

| 功能         | 核心思路                             |
| ------------ | ------------------------------------ |
| 表格数据渲染 | elementPlus el-table组件使用         |
| 删除功能     | 获取当前id  调用接口                 |
| 搜索功能     | 用的依旧是列表接口，多传一个name参数 |
| 清除搜索功能 | 清空搜索参数  重新获取列表           |


